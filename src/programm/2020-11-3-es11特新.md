---
title: å°é²œES2020æ–°ç‰¹æ€§
date: 2020-11-03
author: pachverb
description: esæ ‡å‡†æ¯å¹´ä¸€ä¸ªç‰ˆæœ¬æ›´æ–°ï¼Œç›®å‰å·²ç»æ›´æ–°åˆ°es2020(es11), é¢„è®¡es12(es2020)ä¹Ÿä¼šå¾ˆå¿«å‘å¸ƒ. æœ¬æ­¤æ–‡ç« å°±ä¸ªäººå…³äºes2020æ–°ç‰¹æ€§å­¦ä¹ ç¬”è®°ä¸å¿ƒå¾·åˆ†äº«.
location: æˆéƒ½
tags:
    - es2020
---
![img](./images/red-streetcar-in-old-town.jpg)
### å†™åœ¨å‰é¢
åˆæœ‰å¾ˆé•¿æ—¶é—´æ²¡æœ‰å‘è¡¨æ–‡ç« äº†ã€‚å…¶å®åŸè®¡åˆ’å®šäºæ¯å‘¨å‘è¡¨ä¸€ç¯‡æ–‡ç« ï¼Œåˆšå¼€å§‹è§‰å¾—è¿™æ ·çš„é¢‘ç‡è¿˜å¥½ã€‚æ…¢æ…¢çš„è§‰å¾—è¿™æ ·çš„æ›´æ–°æ•ˆç‡æœ‰ç‚¹é¢‘ç¹, ä¹Ÿå°±æ²¡åœ¨åšæŒã€‚ä»Šå¤©çªç„¶ç¿»äº†ç¿»è‡ªå·±çš„çš„åšå®¢ï¼Œ è§‰ç€è‡ªå·±å†™çš„ä¸œè¥¿ï¼Œè™½ç„¶ä¸æ˜¯å•¥å¤§ä½œå“ï¼Œä¸ªäººè§‰ç€è¿˜æ˜¯æŒºä¸é”™çš„ã€‚åšç¨‹åºå¼€å‘ï¼Œä¸ç®¡å†å¿™ã€‚åšå®¢è¿˜æ˜¯å¾—å†™ï¼Œå“ªæ€•é¢‘ç‡æ‹‰é•¿ä¸€ç‚¹éƒ½å¯ä»¥ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œå¼€å§‹å§ã€‚

### esæ–°åŠŸèƒ½
#### ES MODULEåŠ¨æ€å¯¼å…¥
æ ‡å‡†çš„import å¯¼å…¥æ˜¯é™æ€çš„ã€‚ä¼šä½¿æ‰€æœ‰è¢«å¯¼å…¥çš„æ¨¡å—ï¼Œåœ¨åŠ è½½æ—¶å°±ä¼šç¼–è¯‘ï¼ˆæ— æ³•åšåˆ°,æŒ‰éœ€åŠ è½½ï¼‰.
åŠ¨æ€å¯¼å…¥å¯ä»¥åšåˆ°æ ¹æ®æ¡ä»¶åŠ¨æ€åŠ è½½æ¨¡å—ä¾èµ–. ä¸ç®¡æ˜¯é™æ€æ¨¡å—å¯¼å…¥æ–¹å¼è¿˜æ˜¯åŠ¨æ€å¯¼å…¥ï¼Œä¸å¯æ»¥ç”¨åŠ¨æ€å¯¼å…¥ã€‚
**ä½¿ç”¨åœºæ™¯**ï¼š
- å½“é™æ€å¯¼å…¥çš„æ¨¡å—å¾ˆæ˜æ˜¾çš„é™ä½äº†ä»£ç çš„åŠ è½½é€Ÿåº¦ä¸”è¢«ä½¿ç”¨çš„å¯èƒ½æ€§å¾ˆä½ï¼Œæˆ–è€…å¹¶ä¸éœ€è¦é©¬ä¸Šä½¿ç”¨å®ƒã€‚
- å½“é™æ€å¯¼å…¥çš„æ¨¡å—å¾ˆæ˜æ˜¾çš„å ç”¨äº†å¤§é‡ç³»ç»Ÿå†…å­˜ä¸”è¢«ä½¿ç”¨çš„å¯èƒ½æ€§å¾ˆä½ã€‚
- å½“è¢«å¯¼å…¥çš„æ¨¡å—ï¼Œåœ¨åŠ è½½æ—¶å¹¶ä¸å­˜åœ¨ï¼Œéœ€è¦å¼‚æ­¥è·å–
- å½“å¯¼å…¥æ¨¡å—çš„è¯´æ˜ç¬¦ï¼Œéœ€è¦åŠ¨æ€æ„å»ºã€‚ï¼ˆé™æ€å¯¼å…¥åªèƒ½ä½¿ç”¨é™æ€è¯´æ˜ç¬¦ï¼‰
- å½“è¢«å¯¼å…¥çš„æ¨¡å—æœ‰å‰¯ä½œç”¨ï¼ˆè¿™é‡Œè¯´çš„å‰¯ä½œç”¨ï¼Œå¯ä»¥ç†è§£ä¸ºæ¨¡å—ä¸­ä¼šç›´æ¥è¿è¡Œçš„ä»£ç ï¼‰ï¼Œè¿™äº›å‰¯ä½œç”¨åªæœ‰åœ¨è§¦å‘äº†æŸäº›æ¡ä»¶æ‰è¢«éœ€è¦æ—¶ã€‚ï¼ˆåŸåˆ™ä¸Šæ¥è¯´ï¼Œæ¨¡å—ä¸èƒ½æœ‰å‰¯ä½œç”¨ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™ï¼Œä½ æ— æ³•æ§åˆ¶ä½ æ‰€ä¾èµ–çš„æ¨¡å—çš„å†…å®¹ï¼‰

**ä½¿ç”¨**:
åŠ¨æ€å¯¼å…¥ä½¿ç”¨importå…³é”®å­—, ä½¿ç”¨æ—¶ç±»ä¼¼å‡½æ•°è°ƒç”¨ï¼Œè°ƒç”¨ import(module-path)ã€‚å…¶ä¸­çš„å‚æ•°è¡¨æ˜æ˜¯æ¨¡å—æ‰€åœ¨è·¯å¾„ã€‚
ä»¥è¿™ç§æ–¹å¼ä½¿ç”¨ã€‚å°†ä¼šä»¥pormiseè¿”å›.
```
// main
if(window){
    import('./my-module.js').then(module => {
        console.log(module.a)
    })
}else{
    console.log('now is not browser runtime')
}
// my-module
export const a = 2;
```
æ‰§è¡Œ mainï¼Œç»“æœè¿”å›mainï¼ša

### ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦
ä½œç”¨: ä¸ºå˜é‡èµ‹äºˆé»˜è®¤å€¼. é»˜è®¤å€¼è®¾ç½®ï¼Œæ¯”è¾ƒå¸¸è§å°±æ˜¯ ä½¿ç”¨ ï½œï½œ (orï¼‰è¿ç®—ç¬¦.
è¯¥è¿ç®—ç¬¦æ˜¯åŒç›®è¿ç®—ç¬¦

**pattern:** leftexptr ?? right-exptr
--NOTE:--å½“å·¦ä¾§æ“ä½œæ•°å€¼ä¸º null æˆ– undefinedæ—¶ï¼Œ è¡¨è¾¾å¼å€¼ä¸ºå³ä¾§å€¼ï¼› å¦åˆ™ä¸ºå·¦ä¾§æ“ä½œæ•°å€¼ã€‚

**å®è·µ:**
```
    const nullValue = null;
    const emptyText = ""; // falsy
    const someNumber = 42;

    const valA = nullValue ?? "default for A";
    const valB = emptyText ?? "default for B";
    const valC = someNumber ?? 0;

    console.log(valA); // "default for A"
    console.log(valB); // "" (as the empty string is not null or undefined)
    console.log(valC); // 42
```

### å¯é€‰é“¾æ¥è¿ç®—ç¬¦(optional chaining)
å¼•ç”¨åµŒå¥—å¯¹è±¡å±æ€§ï¼Œè€Œä¸ç”¨è€ƒè™‘å±æ€§æ˜¯å¦å­˜åœ¨ã€‚ ä½¿ç”¨å¯é€‰é“¾æ¥è¿ç®—ç¬¦ ?.  ä¸å­—é¢é‡å±æ€§ç»“åˆ å¦‚æœä¸å­˜åœ¨ï¼Œè¿”å›undefinedï¼› å‡½æ•°ç»“æœä¹Ÿè¿”å›undefined.
å®è·µï¼š
```
const user = { name: "John" };

// Fails with `Uncaught TypeError: Cannot read property 'city' of undefined`

const city = user.address.city;

// Works but verbose

let city = "Not Set";

if (user.address !== undefined && user.address !== null) {

  city = user.address.city;

}

// Works and concise but requires a 3rd party library

const city = _.get(user, "address.city", "Not Set");

// ğŸ¤—

const city = user?.address?.city ?? "Not Set";
```

### BigInt
javascripçš„tnumberå¯è¡¨ç¤ºæœ€å¤§èŒƒå›´æ˜¯ 2^53-1.ç°åœ¨æä¾›bitIntæ–¹æ³•å¯è¡¨ç¤ºå¤§ä¸è¾¹ç•Œçš„æ•°.
```
const hugeString = BigInt("9007199254740991")
// â†ª 9007199254740991n

const hugeHex = BigInt("0x1fffffffffffff")
// â†ª 9007199254740991n

const hugeBin = BigInt("0b11111111111111111111111111111111111111111111111111111")
// â†ª 9007199254740991n

// ç±»å‹
let a = 2n
typeof(a) // bigint

```
### globalThis
å…¨å±€globalThiså±æ€§åŒ…å«thisç±»ä¼¼äºå…¨å±€å¯¹è±¡çš„å…¨å±€å€¼ã€‚è€Œä¸ç”¨é’ˆå¯¹ç‰¹å®šå¹³å°hackã€‚åœ¨ä¹‹å‰è·å–å…¨å±€å¯¹è±¡ï¼Œ

```
var getGlobal = function () {

  if (typeof self !== 'undefined') { return self; }

  if (typeof window !== 'undefined') { return window; }

  if (typeof global !== 'undefined') { return global; }

  throw new Error('unable to locate global object');

};

var globals = getGlobal();

if (typeof globals.setTimeout !== 'function') {

  // no setTimeout in this environment!

}
```


### å‚è€ƒæŒ‡å—
[åŠ¨æ€å¯¼å…¥| MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/import)
[ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦|MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator)
[å¯é€‰é“¾æ¥|MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining)
[BigInt](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt)
[globalThis](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis)










